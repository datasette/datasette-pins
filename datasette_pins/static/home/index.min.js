var re=Object.freeze,Be=Object.defineProperty;var g=(t,r)=>re(Be(t,"raw",{value:re(r||t.slice())}));async function F(t,r){let{method:c,data:e}=r!=null?r:{};return fetch("".concat(t),{method:c,credentials:"include",headers:{"Content-Type":"application/json"},body:e?JSON.stringify(e):void 0}).then(o=>o.json())}var R=class{static async reorder(r){return F("/-/datasette-pins/api/reorder",{method:"POST",data:{new_order:r}})}static async global_pins(){return F("/-/datasette-pins/api/global_pins")}static async unpin(r){return F("/-/datasette-pins/api/unpin",{method:"POST",data:{item_id:r}})}};function ae(t){let r=document.createElement("template");return r.innerHTML=t,document.importNode(r.content,!0)}function se(t){let r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.innerHTML=t,r}var ee=Object.assign(z(ae,t=>{if(t.firstChild===null)return null;if(t.firstChild===t.lastChild)return t.removeChild(t.firstChild);let r=document.createElement("span");return r.appendChild(t),r}),{fragment:z(ae,t=>t)}),D=Object.assign(z(se,t=>t.firstChild===null?null:t.firstChild===t.lastChild?t.removeChild(t.firstChild):t),{fragment:z(se,t=>{let r=document.createDocumentFragment();for(;t.firstChild;)r.appendChild(t.firstChild);return r})}),$e=9,Ie=10,Ve=12,ze=13,Fe=32,je=65,qe=90,We=97,Xe=122,P=60,u=62,C=47,T=45,j=33,q=61,oe=34,le=39,Qe=63,f=1,ce=2,fe=3,W=4,G=5,v=6,X=7,H=8,B=9,Q=10,Y=11,$=12,Z=13,O=14,de=15,ue=16,_=17,pe=18,Te=19,Ee=20,he=21,J=22,y=23,_e=24,me=25,E=26,be=27,Ae=28,ge=29,Ye=128,Ce=1,Ze=8,Je=1,ke="http://www.w3.org/2000/svg",w="http://www.w3.org/1999/xlink",ve="http://www.w3.org/XML/1998/namespace",Se="http://www.w3.org/2000/xmlns/",xe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),V=new Map([["xlink:actuate",w],["xlink:arcrole",w],["xlink:href",w],["xlink:role",w],["xlink:show",w],["xlink:title",w],["xlink:type",w],["xml:lang",ve],["xml:space",ve],["xmlns",Se],["xmlns:xlink",Se]]);function z(t,r){return function({raw:c}){let e=f,o="",p,d,m,b,U=0;for(let a=0,h=arguments.length;a<h;++a){let s=c[a];if(a>0){let i=arguments[a];switch(e){case E:{if(i!=null){let l="".concat(i);if(Oe(d))o+=l.replace(/[<]/g,k);else{if(new RegExp("</".concat(d,"[\\s>/]"),"i").test(o.slice(-d.length-2)+l))throw new Error("unsafe raw text");o+=l}}break}case f:{i==null||(i instanceof Node||typeof i!="string"&&i[Symbol.iterator]||/(?:^|>)$/.test(c[a-1])&&/^(?:<|$)/.test(s)?(o+="<!--::"+a+"-->",U|=Ye):o+="".concat(i).replace(/[<&]/g,k));break}case B:{e=$;let l;if(/^[\s>]/.test(s)){if(i==null||i===!1){o=o.slice(0,m-c[a-1].length);break}if(i===!0||(l="".concat(i))===""){o+="''";break}if(c[a-1].slice(m,b)==="style"&&K(i)||typeof i=="function"){o+="::"+a,U|=Ce;break}}if(l===void 0&&(l="".concat(i)),l==="")throw new Error("unsafe unquoted empty string");o+=l.replace(/^['"]|[\s>&]/g,k);break}case $:{o+="".concat(i).replace(/[\s>&]/g,k);break}case Y:{o+="".concat(i).replace(/['&]/g,k);break}case Q:{o+="".concat(i).replace(/["&]/g,k);break}case v:{if(K(i)){o+="::"+a+"=''",U|=Ce;break}throw new Error("invalid binding")}case _:break;default:throw new Error("invalid binding")}}for(let i=0,l=s.length;i<l;++i){let n=s.charCodeAt(i);switch(e){case f:{n===P&&(e=ce);break}case ce:{n===j?e=me:n===C?e=fe:I(n)?(p=i,d=void 0,e=W,--i):n===Qe?(e=G,--i):(e=f,--i);break}case fe:{I(n)?(e=W,--i):n===u?e=f:(e=G,--i);break}case W:{S(n)?(e=v,d=L(s,p,i)):n===C?e=O:n===u&&(d=L(s,p,i),e=M(d)?E:f);break}case v:{S(n)||(n===C||n===u?(e=X,--i):n===q?(e=H,m=i+1,b=void 0):(e=H,--i,m=i+1,b=void 0));break}case H:{S(n)||n===C||n===u?(e=X,--i,b=i):n===q&&(e=B,b=i);break}case X:{S(n)||(n===C?e=O:n===q?e=B:n===u?e=M(d)?E:f:(e=H,--i,m=i+1,b=void 0));break}case B:{S(n)||(n===oe?e=Q:n===le?e=Y:n===u?e=M(d)?E:f:(e=$,--i));break}case Q:{n===oe&&(e=Z);break}case Y:{n===le&&(e=Z);break}case $:{S(n)?e=v:n===u&&(e=M(d)?E:f);break}case Z:{S(n)?e=v:n===C?e=O:n===u?e=M(d)?E:f:(e=v,--i);break}case O:{n===u?e=f:(e=v,--i);break}case G:{n===u&&(e=f);break}case de:{n===T?e=ue:n===u?e=f:(e=_,--i);break}case ue:{n===T?e=y:n===u?e=f:(e=_,--i);break}case _:{n===P?e=pe:n===T&&(e=J);break}case pe:{n===j?e=Te:n!==P&&(e=_,--i);break}case Te:{n===T?e=Ee:(e=_,--i);break}case Ee:{n===T?e=he:(e=y,--i);break}case he:{e=y,--i;break}case J:{n===T?e=y:(e=_,--i);break}case y:{n===u?e=f:n===j?e=_e:n!==T&&(e=_,--i);break}case _e:{n===T?e=J:n===u?e=f:(e=_,--i);break}case me:{n===T&&s.charCodeAt(i+1)===T?(e=de,++i):(e=G,--i);break}case E:{n===P&&(e=be);break}case be:{n===C?e=Ae:(e=E,--i);break}case Ae:{I(n)?(p=i,e=ge,--i):(e=E,--i);break}case ge:{S(n)&&d===L(s,p,i)?e=v:n===C&&d===L(s,p,i)?e=O:n===u&&d===L(s,p,i)?e=f:I(n)||(e=E,--i);break}default:{e=void 0;break}}}o+=s}let te=t(o),ie=document.createTreeWalker(te,U,null,!1),ne=[];for(;ie.nextNode();){let a=ie.currentNode;switch(a.nodeType){case Je:{let h=a.attributes;for(let s=0,i=h.length;s<i;++s){let{name:l,value:n}=h[s];if(/^::/.test(l)){let N=arguments[+l.slice(2)];we(a,l),--s,--i;for(let x in N){let A=N[x];A==null||A===!1||(typeof A=="function"?a[x]=A:x==="style"&&K(A)?Ne(a[x],A):Ke(a,x,A===!0?"":A))}}else if(/^::/.test(n)){let N=arguments[+n.slice(2)];we(a,l),--s,--i,typeof N=="function"?a[l]=N:Ne(a[l],N)}}break}case Ze:{if(/^::/.test(a.data)){let h=a.parentNode,s=arguments[+a.data.slice(2)];if(s instanceof Node)h.insertBefore(s,a);else if(typeof s!="string"&&s[Symbol.iterator])if(s instanceof NodeList||s instanceof HTMLCollection)for(let i=s.length-1,l=a;i>=0;--i)l=h.insertBefore(s[i],l);else for(let i of s)i!=null&&h.insertBefore(i instanceof Node?i:document.createTextNode(i),a);else h.insertBefore(document.createTextNode(s),a);ne.push(a)}break}}}for(let a of ne)a.parentNode.removeChild(a);return r(te)}}function k(t){return"&#".concat(t.charCodeAt(0).toString(),";")}function I(t){return je<=t&&t<=qe||We<=t&&t<=Xe}function S(t){return t===$e||t===Ie||t===Ve||t===Fe||t===ze}function K(t){return t&&t.toString===Object.prototype.toString}function M(t){return t==="script"||t==="style"||Oe(t)}function Oe(t){return t==="textarea"||t==="title"}function L(t,r,c){return t.slice(r,c).toLowerCase()}function Ke(t,r,c){if(t.namespaceURI===ke&&(r=r.toLowerCase(),r=xe.get(r)||r,V.has(r))){t.setAttributeNS(V.get(r),r,c);return}t.setAttribute(r,c)}function we(t,r){if(t.namespaceURI===ke&&(r=r.toLowerCase(),r=xe.get(r)||r,V.has(r))){t.removeAttributeNS(V.get(r),r);return}t.removeAttribute(r)}function Ne(t,r){for(let c in r){let e=r[c];c.startsWith("--")?t.setProperty(c,e):t[c]=e}}var ye,Me,Le;function Ue(t){switch(t.item_type){case"table":case"view":return D(ye||(ye=g(['<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16"> <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z"/> </svg>'])));case"canned_query":return D(Me||(Me=g(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-code" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M8.646 5.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 8 8.646 6.354a.5.5 0 0 1 0-.708m-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 8l1.647-1.646a.5.5 0 0 0 0-.708"/>\n      <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>\n      <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>\n    </svg>'])));case"database":return D(Le||(Le=g(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-database" viewBox="0 0 16 16">\n      <path d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313M13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A5 5 0 0 0 13 5.698M14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A5 5 0 0 0 13 8.698m0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525"/>\n    </svg>'])))}}var De,Re=()=>D(De||(De=g(['<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-pin-fill" viewBox="0 0 16 16">\n  <path fill="#276890" d="M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A6 6 0 0 1 5 6.708V2.277a3 3 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354"/>\n</svg>'])));var Ge;function et(t,r){let{id:c,origin_database:e,origin_table:o,metadata:p}=t,d=o?"".concat(e,"/").concat(o):e,m=o?"".concat(e,"/").concat(o):e,b=p&&p.summary?p.summary:"";return ee(Ge||(Ge=g(['<div\n    class="datasette-pins-item"\n    onClick=','\n  >\n    <div class="main">\n      <div class="title-bar">\n        <div><span>','</span></div>\n        <div class="title-label">\n          <a href=',">",'</a>\n        </div>\n      </div>\n      <div>\n        <button class="pin-button" onClick='," data-id=",">\n          ",'\n        </button>\n      </div>\n    </div>\n    <div><p class="desc">',"</p></div>\n  </div>"])),()=>window.location.href=m,Ue(t),m,d,r(t),c,Re(),b)}function Pe(){let t=document.querySelector("#datasette-pins-homepage-target .reorder");document.querySelectorAll(".datasette-pins-item").length>1?t.style.display="block":t.style.display="none"}var He;async function tt(){let t=document.querySelector("#datasette-pins-homepage-target"),r=JSON.parse(document.querySelector("#datasette-pins-homepage-data").textContent);function c(e){return function(o){o.stopPropagation(),window.confirm("Are you sure you want to unpin ".concat(e.origin_database,"/").concat(e.origin_table,"?"))&&R.unpin(e.id).then(()=>{var p;(p=o.target.closest(".datasette-pins-item"))==null||p.remove(),t.querySelector(".datasette-pins-item")||(t.innerHTML=""),Pe()})}}r.length&&(t.appendChild(ee(He||(He=g(['\n    <div>\n      <h2>Pinned Items</h2>\n      <div class="datasette-pins-container">\n        ','\n      </div>\n      <div class="reorder">\n        <a href="/-/datasette-pins/">Re-order pinned items</a>\n      </div>\n    </div>\n  '])),r.map(e=>et(e,c)))),Pe())}document.addEventListener("DOMContentLoaded",tt);
